DROP TABLE ENTRADA;
DROP TABLE ACTUALIZAR;
DROP TABLE CLIENTE;
DROP TABLE MUS_EVE;
DROP TABLE EVENTO;
DROP TABLE SALA;
DROP TABLE MUS_OBR;
DROP TABLE OBRA_FAMOSA;
DROP TABLE MUSICO;
DROP TABLE GEN_INS;
DROP TABLE INSTRUMENTO;
DROP TABLE GENERO;
DROP TABLE EPOCA;

CREATE TABLE EPOCA(
    NOMBRE_EPOCA VARCHAR2(20)
        CONSTRAINT EPO_NOM_PK PRIMARY KEY,
    CARACTERISTICA_E VARCHAR2(30),
    PER_COMIENZO NUMBER(4)
        CONSTRAINT EPO_COM_NN NOT NULL,
    PER_FIN NUMBER(4)
        CONSTRAINT EPO_FIN_NN NOT NULL
);

CREATE TABLE GENERO(
    NOMBRE_GENERO VARCHAR2(20)
        CONSTRAINT GEN_NOM_PK PRIMARY KEY,
    NOMBRE_EPOCA VARCHAR2(20)
        CONSTRAINT GEN_NOM_FK REFERENCES EPOCA,
    CARACTERISTICA_G VARCHAR2(30),
    ORIGEN VARCHAR2(30)
);

CREATE TABLE INSTRUMENTO(
    NOMBRE_INSTRUMENTO VARCHAR2(10)
        CONSTRAINT INS_NOM_PK PRIMARY KEY,
    CREADOR VARCHAR2(10)
        CONSTRAINT INS_CRE_NN NOT NULL,
    TIPO VARCHAR2(10)
        CONSTRAINT INS_TIP_NN NOT NULL,
    MATERIAL VARCHAR2(10),
    LUGAR_CREACION VARCHAR2(10)
        CONSTRAINT INS_LUG_NN NOT NULL
);

CREATE TABLE GEN_INS(
    NOMBRE_GENERO VARCHAR2(20)
        CONSTRAINT GIN_GEN_NN NOT NULL
        CONSTRAINT GIN_GEN_FK REFERENCES GENERO,
    NOMBRE_INSTRUMENTO VARCHAR2(10)
        CONSTRAINT GIN_INS_NN NOT NULL
        CONSTRAINT GIN_INS_FK REFERENCES INSTRUMENTO,
    CONSTRAINT GIN_GIN_UK UNIQUE (NOMBRE_GENERO, NOMBRE_INSTRUMENTO)
);

CREATE TABLE MUSICO (
    NOMBRE_MUSICO VARCHAR2(20)
        CONSTRAINT MUS_NOM_PK PRIMARY KEY,
    NOMBRE_GENERO VARCHAR2(20)
        CONSTRAINT MUS_GEN_FK REFERENCES GENERO,
    HISTORIA_DE_VIDA VARCHAR2(50),
    FECHA_NAC DATE
        CONSTRAINT MUS_NAC_NN NOT NULL,
    FECHA_MUERTE DATE
        CONSTRAINT MUS_MUE_NN NOT NULL
);

CREATE TABLE OBRA_FAMOSA (
    NOMBRE_OBRA VARCHAR2(50)
        CONSTRAINT OBR_NOM_PK PRIMARY KEY,
    NOMBRE_GENERO VARCHAR2(20)
        CONSTRAINT OBR_GEN_FK REFERENCES GENERO,
    ANIO_CREACION NUMBER(4)
);

CREATE TABLE MUS_OBR (
    NOMBRE_MUSICO VARCHAR2(20)
        CONSTRAINT MOB_MUS_NN NOT NULL
        CONSTRAINT MOB_MUS_FK REFERENCES MUSICO,
    NOMBRE_OBRA VARCHAR2(50)
        CONSTRAINT MOB_OBR_NN NOT NULL
        CONSTRAINT MOB_OBR_FK REFERENCES OBRA_FAMOSA,
    CONSTRAINT MOB_MOB_UK UNIQUE (NOMBRE_MUSICO, NOMBRE_OBRA)
);

CREATE TABLE SALA (
    NUM_ID NUMBER(2)
        CONSTRAINT SAL_ID_PK PRIMARY KEY,
    AFORO NUMBER(3)
        CONSTRAINT SAL_AFO_NN NOT NULL
);

CREATE TABLE EVENTO (
    NOMBRE VARCHAR(20),
    NUM_ID NUMBER(5),
    FECHA_HORA DATE,
    ID_SALA NUMBER(2) REFERENCES SALA,
    CONSTRAINT EVENTO_PK PRIMARY KEY (NUM_ID, FECHA_HORA)
);

CREATE TABLE MUS_EVE(
    NOM_MUS VARCHAR2(20)
        CONSTRAINT MEV_MUS_NN NOT NULL
        CONSTRAINT MEV_NOM_FK REFERENCES MUSICO,
    ID_EVENTO NUMBER(5)
        CONSTRAINT MEV_EVE_NN NOT NULL,
    FECHA_EVENTO DATE,
    CONSTRAINT MEV_EVE_FK FOREIGN KEY (ID_EVENTO, FECHA_EVENTO) REFERENCES EVENTO,
    CONSTRAINT MEV_MEV_UK UNIQUE (NOM_MUS, ID_EVENTO, FECHA_EVENTO)
);

CREATE TABLE CLIENTE (
    DNI VARCHAR2(9)
        CONSTRAINT CLI_DNI_PK PRIMARY KEY,
    NOMBRE VARCHAR2(20)
        CONSTRAINT CLI_NOM_NN NOT NULL,
    APELLIDO VARCHAR2(10)
        CONSTRAINT CLI_APE_NN NOT NULL,
    TELEFONO NUMBER(9)
);

CREATE TABLE ENTRADA (
    ID_EVENTO NUMBER(5)
        CONSTRAINT ENT_EVE_NN NOT NULL,
    FECHA_HORA DATE
        CONSTRAINT ENT_FEC_NN NOT NULL,
    DNI_CLI VARCHAR2(9)
        CONSTRAINT ENT_CLI_NN NOT NULL
        CONSTRAINT ENT_CLI_FK REFERENCES CLIENTE,
    CONSTRAINT ENTRADA_FK FOREIGN KEY (ID_EVENTO, FECHA_HORA) REFERENCES EVENTO
);

--INSERT

--Epoca
INSERT INTO EPOCA VALUES ('Moderna', null, 1492, 1789);
INSERT INTO EPOCA VALUES ('Contemporanea', null, 1900, 2000);

--Género
INSERT INTO GENERO VALUES ('Clásica', 'Moderna', null, null);
INSERT INTO GENERO VALUES ('Sinfonía', 'Moderna', null, null);
INSERT INTO GENERO VALUES ('Opera', 'Moderna', null, null);
INSERT INTO GENERO VALUES ('Misa', 'Moderna', null, null);

INSERT INTO GENERO VALUES ('Jazz', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Country', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Mambo', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Cumbia', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Reggae', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Pop', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Salsa', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Hip Hop', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Reggaetón', 'Contemporanea', null, null);
INSERT INTO GENERO VALUES ('Rock', 'Contemporanea', null, null);

--Músicos
    -- Reggae
INSERT INTO MUSICO VALUES ('Bob Marley', 'Reggae', null, '06/02/1945', '11/5/1981');
INSERT INTO MUSICO VALUES ('Peter Tosh', 'Reggae', null, '19/10/1944', '11/11/1987');
INSERT INTO MUSICO VALUES ('Jimmy Cliff', 'Reggae', null, '01/04/1948', SYSDATE);
INSERT INTO MUSICO VALUES ('Alborosie', 'Reggae', null, '04/07/1977', SYSDATE);
INSERT INTO MUSICO VALUES ('Gregory Isaacs', 'Reggae', null, '15/07/1951', '25/10/2010');
INSERT INTO MUSICO VALUES ('Damian Marley', 'Reggae', null, '21/07/1978', SYSDATE);
INSERT INTO MUSICO VALUES ('Buju Banton', 'Reggae', null, '15/07/1973', SYSDATE);
INSERT INTO MUSICO VALUES ('Bunny Wailer', 'Reggae', null, '10/04/1947', '02/03/2021');

    -- Jazz
INSERT INTO MUSICO VALUES ('Miles Davis', 'Jazz', null, '26/05/1926', '28/09/1991');
INSERT INTO MUSICO VALUES ('Louis Armstrong', 'Jazz', null, '04/08/1901', '06/07/1971');
INSERT INTO MUSICO VALUES ('Duke Ellington', 'Jazz', null, '29/04/1899', '24/05/1974');
INSERT INTO MUSICO VALUES ('Thelonious Monk', 'Jazz', null, '10/10/1917', '17/02/1982');
INSERT INTO MUSICO VALUES ('Charlie Parker', 'Jazz', null, '29/08/1920', '12/03/1955');
INSERT INTO MUSICO VALUES ('Dizzy Gillespie', 'Jazz', null, '21/10/1917', '06/01/1993');

    -- Clásica
INSERT INTO MUSICO VALUES ('Amadeus Mozart', 'Clásica', null, '27/01/1756', '05/12/1791');

--Obras Famosas
    -- Bob Marley
INSERT INTO OBRA_FAMOSA VALUES ('Get Up, Stand Up', 'Reggae', 1973);
INSERT INTO OBRA_FAMOSA VALUES ('No Woman, No Cry', 'Reggae', 1975);
INSERT INTO OBRA_FAMOSA VALUES ('Redemption Song', 'Reggae', 1980);
INSERT INTO OBRA_FAMOSA VALUES ('Trench Town Rock', 'Reggae', 1971);
INSERT INTO OBRA_FAMOSA VALUES ('I Shot the Sheriff', 'Reggae', 1973);
    -- Gregory Isaacs
INSERT INTO OBRA_FAMOSA VALUES ('What A Feeling', 'Reggae', 1981);
INSERT INTO OBRA_FAMOSA VALUES ('The Number One', 'Reggae', 1973);
INSERT INTO OBRA_FAMOSA VALUES ('Soon Forward', 'Reggae', 1979);
INSERT INTO OBRA_FAMOSA VALUES ('Mr Brown', 'Reggae', 1979);
INSERT INTO OBRA_FAMOSA VALUES ('Yes I Do', 'Reggae', 1983);

    -- Louis Armstrong
INSERT INTO OBRA_FAMOSA VALUES ('Stardust', 'Jazz', 1931);
INSERT INTO OBRA_FAMOSA VALUES ('High Society', 'Jazz', 1956);
INSERT INTO OBRA_FAMOSA VALUES ('What A Wonderful World', 'Jazz', 1968);
INSERT INTO OBRA_FAMOSA VALUES ('A Foggy Day', 'Jazz', 1956);
INSERT INTO OBRA_FAMOSA VALUES ('The Five Pennies', 'Jazz', 1959);

    -- Miles Davis
INSERT INTO OBRA_FAMOSA VALUES ('So What', 'Jazz', 1959);
INSERT INTO OBRA_FAMOSA VALUES ('Milestones', 'Jazz', 1958);
INSERT INTO OBRA_FAMOSA VALUES ('Blue in Green', 'Jazz', 1959);
INSERT INTO OBRA_FAMOSA VALUES ('Flamenco Sketches', 'Jazz', 1959);
INSERT INTO OBRA_FAMOSA VALUES ('Summertime', 'Jazz', 1958);

    -- Mozart
        -- Sinfonías
INSERT INTO OBRA_FAMOSA VALUES ('N.º 25, en sol menor, KV 183', 'Sinfonía', 1773);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 31, en re mayor, KV 297', 'Sinfonía', 1778);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 35, en re mayor, KV 385', 'Sinfonía', 1782);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 36, en do mayor, KV 425', 'Sinfonía', 1783);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 38, en re mayor, KV 504', 'Sinfonía', 1786);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 39, en mi bemol mayor, KV 543', 'Sinfonía', 1788);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 40, en sol menor, KV 550', 'Sinfonía', 1788);
INSERT INTO OBRA_FAMOSA VALUES ('N.º 41, en do mayor, KV 551', 'Sinfonía', 1788);

        -- Operas
INSERT INTO OBRA_FAMOSA VALUES ('Idomeneo rey de Creta', 'Opera', 1781);
INSERT INTO OBRA_FAMOSA VALUES ('El rapto en el serrallo', 'Opera', 1782);
INSERT INTO OBRA_FAMOSA VALUES ('Las bodas de Fígaro', 'Opera', 1786);
INSERT INTO OBRA_FAMOSA VALUES ('Don Giovanni', 'Opera', 1787);
INSERT INTO OBRA_FAMOSA VALUES ('Così fan tutte', 'Opera', 1790);
INSERT INTO OBRA_FAMOSA VALUES ('La flauta mágica', 'Opera', 1791);
INSERT INTO OBRA_FAMOSA VALUES ('La clemencia de Tito', 'Opera', 1791);

        -- Misas
INSERT INTO OBRA_FAMOSA VALUES ('Misa de Coronación, KV 317', 'Misa', null);
INSERT INTO OBRA_FAMOSA VALUES ('Misa en do menor, KV 427', 'Misa', null);
INSERT INTO OBRA_FAMOSA VALUES ('Ave verum corpus, KV 618', 'Misa', null);
INSERT INTO OBRA_FAMOSA VALUES ('Réquiem en re menor, KV 626', 'Misa', null);

--Compone (MUS_OBR)
INSERT INTO MUS_OBR VALUES ('Bob Marley', 'Get Up, Stand Up');
INSERT INTO MUS_OBR VALUES ('Bob Marley', 'No Woman, No Cry');
INSERT INTO MUS_OBR VALUES ('Bob Marley', 'Redemption Song');
INSERT INTO MUS_OBR VALUES ('Bob Marley', 'Trench Town Rock');
INSERT INTO MUS_OBR VALUES ('Bob Marley', 'I Shot the Sheriff');

INSERT INTO MUS_OBR VALUES ('Gregory Isaacs', 'What A Feeling');
INSERT INTO MUS_OBR VALUES ('Gregory Isaacs', 'The Number One');
INSERT INTO MUS_OBR VALUES ('Gregory Isaacs', 'Soon Forward');
INSERT INTO MUS_OBR VALUES ('Gregory Isaacs', 'Mr Brown');
INSERT INTO MUS_OBR VALUES ('Gregory Isaacs', 'Yes I Do');

INSERT INTO MUS_OBR VALUES ('Louis Armstrong', 'Stardust');
INSERT INTO MUS_OBR VALUES ('Louis Armstrong', 'High Society');
INSERT INTO MUS_OBR VALUES ('Louis Armstrong', 'What A Wonderful World');
INSERT INTO MUS_OBR VALUES ('Louis Armstrong', 'A Foggy Day');
INSERT INTO MUS_OBR VALUES ('Louis Armstrong', 'The Five Pennies');

INSERT INTO MUS_OBR VALUES ('Miles Davis', 'So What');
INSERT INTO MUS_OBR VALUES ('Miles Davis', 'Milestones');
INSERT INTO MUS_OBR VALUES ('Miles Davis', 'Blue in Green');
INSERT INTO MUS_OBR VALUES ('Miles Davis', 'Flamenco Sketches');
INSERT INTO MUS_OBR VALUES ('Miles Davis', 'Summertime');

INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 25, en sol menor, KV 183');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 31, en re mayor, KV 297');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 35, en re mayor, KV 385');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 36, en do mayor, KV 425');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 38, en re mayor, KV 504');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 39, en mi bemol mayor, KV 543');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 40, en sol menor, KV 550');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'N.º 41, en do mayor, KV 551');

INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Idomeneo rey de Creta');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'El rapto en el serrallo');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Las bodas de Fígaro');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Don Giovanni');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Così fan tutte');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'La flauta mágica');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'La clemencia de Tito');

INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Misa de Coronación, KV 317');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Misa en do menor, KV 427');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Ave verum corpus, KV 618');
INSERT INTO MUS_OBR VALUES ('Amadeus Mozart', 'Réquiem en re menor, KV 626');

-- Sala
--               VALUES (NUM_ID, AFORO)
INSERT INTO SALA VALUES (1, 10);
INSERT INTO SALA VALUES (2, 10);
INSERT INTO SALA VALUES (3, 10);
INSERT INTO SALA VALUES (4, 10);

-- Evento
--                 VALUES (NOMBRE, NUM_ID, FECHA_HORA, ID_SALA)
INSERT INTO EVENTO VALUES ('Reggae Jam', 1, '17/06/2021', 1);
INSERT INTO EVENTO VALUES ('Old Jazz', 2, '06/07/2021', 2);
INSERT INTO EVENTO VALUES ('Requiem de Mozart', 3, '20/08/2021', 3);
INSERT INTO EVENTO VALUES ('Reggae Roots', 5, '25/10/2021', 4);

-- Evento y Músico (MUS_EVE)
--                  VALUES (NOM_MUS, ID_EVE, FECHA_EVENTO)
-- Evento 1
INSERT INTO MUS_EVE VALUES ('Jimmy Cliff', 1, '17/06/2021');
INSERT INTO MUS_EVE VALUES ('Alborosie', 1, '17/06/2021');
INSERT INTO MUS_EVE VALUES ('Damian Marley', 1, '17/06/2021');
INSERT INTO MUS_EVE VALUES ('Buju Banton', 1, '17/06/2021');

-- Evento 2
INSERT INTO MUS_EVE VALUES ('Louis Armstrong', 2, '06/07/2021');
INSERT INTO MUS_EVE VALUES ('Miles Davis', 2, '06/07/2021');

-- Evento 3
INSERT INTO MUS_EVE VALUES ('Amadeus Mozart', 3, '20/08/2021');

-- Evento 5
INSERT INTO MUS_EVE VALUES ('Bob Marley', 5, '25/10/2021');
INSERT INTO MUS_EVE VALUES ('Gregory Isaacs', 5, '25/10/2021');
INSERT INTO MUS_EVE VALUES ('Peter Tosh', 5, '25/10/2021');
INSERT INTO MUS_EVE VALUES ('Bunny Wailer', 5, '25/10/2021');

-- Cliente
--                  VALUES (DNI, NOMBRE, APELLIDO, TELEFONO)
INSERT INTO CLIENTE VALUES ('76508679F', 'Manuel', 'Ortiz', 987654321);
INSERT INTO CLIENTE VALUES ('61552846Q', 'Isabela', 'Gutierrez', 654321987);
INSERT INTO CLIENTE VALUES ('46729724A', 'Erik', 'Guadas', 123456789);
INSERT INTO CLIENTE VALUES ('19491016B', 'Adrian', 'Belloso', 546879213);
INSERT INTO CLIENTE VALUES ('59380461G', 'Luis', 'Perez', 326598741);
INSERT INTO CLIENTE VALUES ('13855441B', 'Virginia', 'Soldado', 145789632);
INSERT INTO CLIENTE VALUES ('43298766R', 'Samuel', 'Menendez', 125469873);
INSERT INTO CLIENTE VALUES ('22850960T', 'Pelayo', 'Romero', 123568947);
INSERT INTO CLIENTE VALUES ('33812345E', 'Fernando', 'Caballete', 124578963);
INSERT INTO CLIENTE VALUES ('23842383P', 'Ignacio', 'Loyola', 126578943);
INSERT INTO CLIENTE VALUES ('48786757P', 'Jose Manuel', 'Escusado', 324598761);
INSERT INTO CLIENTE VALUES ('95735793H', 'Alfonso', 'Fonsi', 786512349);

-- Entrada (Evento, Sala y Cliente)
--                  VALUES (ID_EVENTO, FECHA_HORA, DNI_CLI)
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '76508679F');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '61552846Q');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '46729724A');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '19491016B');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '59380461G');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '13855441B');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '43298766R');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '22850960T');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '33812345E');
INSERT INTO ENTRADA VALUES (1, '17/6/2021', '23842383P');
INSERT INTO ENTRADA VALUES (2, '06/07/2021', '48786757P');
INSERT INTO ENTRADA VALUES (2, '06/07/2021', '95735793H');

COMMIT;
